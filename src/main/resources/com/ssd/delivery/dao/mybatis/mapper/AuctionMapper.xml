<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssd.delivery.dao.mybatis.mapper.AuctionMapper">
  <cache />
  <!-- <insert id="insertAuction" parameterType="AuctionDTO">
      insert into auction
      	(auctionid, serviceid, customerid, enddate, servicedate, startprice, finalprice, address1, address2, successfulbidder, deliveryId, username)
      	values
      	(#{auctionId}, #{serviceId}, #{customerId},#{endDate},#{serviceDate},#{startPrice},
      	null, #{address1}, #{address2}, null, #{deliveryId}, #{username} )
	</insert> -->
	
	<insert id="insertAuction" parameterType="AuctionDTO">
	<!-- <selectKey keyProperty = "auctionId" resultType="int" order="BEFORE">
	select SEQ_auctionId.nextval from dual
	</selectKey> -->
      insert into auction
      	(auctionid, enddate, servicedate, startprice, finalprice, address1, 	
      	address2, successfulbidder, delivery, username)	
      	values
      	(auctionId_seq.nextval, #{endDate}, #{serviceDate}, #{startPrice},
      	null,#{address1}, #{address2}, null, 
      	#{delivery}, #{username})
	</insert>

	<update id="updateAuction" parameterType="AuctionDTO">
    <!-- UPDATE FAVORITEUSER SET 
	   FAVORITEUSERNAME  = #{favoriteUsername}, 
	   TRADECOUNT = #{tradeCount} 
    WHERE USERNAME= #{username} --> 
    update auction set
    	customerid = #{customerId},
    	finalprice = #{finalPrice}
	</update>
	
	<delete id="deleteAuction" parameterType="int">
	DELETE FROM auction 
	WHERE auctionid = #{auctionId}
	</delete>
	
	
	<select id="getAuctionById" resultType="AuctionDTO">
    select * from auction
    where  auctionId = #{auctionId}
	</select>
	
	<select id="getAuctionByUsername" resultType="AuctionDTO">
   	select * from auction
    where username = #{username}
	</select>
	
	<select id="getAuctionList" resultType="AuctionDTO">
    select * from auction
	</select>
	
  
</mapper>